{% extends "layout.html" %}

{% block content_header %}
  {{Â build_breadcrumb('Users', '', 'user', ['List']) }}
{% endblock %}

{% block content %}
  <section class="content">
    {% call build_list_containers('User', 'user') %}
      {% call build_list_table(list=url_for('.UserView:list_json')) %}
        {% call build_list_table_headers() %}
          <th>Firstname</th>
          <th>Lastname</th>
          <th>Extension</th>
          <th>Code</th>
          {{ add_list_table_header_action(get=url_for('.UserView:get', id=''), delete=url_for('.UserView:delete', id='')) }}
        {% endcall %}
      {% endcall %}
    {% endcall %}

    {% call build_hidden_add_containers('Add User') %}
      {% call build_form() %}
        {% call add_default_fields(form=form, submit_value="Add") %}
          {{ render_field(form.firstname) }}
          {{ render_field(form.lastname) }}
          {% do form.lines.append_entry() %}
          {% for line in form.lines %}
            {{ render_field(line.extensions[0].exten, data_allow_custom_values=True) }}
            {{ render_field(line.context, data_listing_href=url_for(listing_urls['context_by_type'], type_='internal')) }}
            {{ render_field(line.protocol) }}
          {% endfor %}
        {% endcall %}
      {% endcall %}
    {% endcall %}
  </section>
{% endblock %}

{% block additional_js %}
  <script src="{{ url_for('.static', filename='js/user.js') }}"></script>
{% endblock %}
